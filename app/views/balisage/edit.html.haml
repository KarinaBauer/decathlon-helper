= stylesheet_link_tag 'app', media: 'all', 'data-turbolinks-track': 'reload'
= stylesheet_link_tag 'edit', media: 'all', 'data-turbolinks-track': 'reload'
= stylesheet_link_tag 'dropdown', media: 'all', 'data-turbolinks-track': 'reload'

%header
  = link_to '<< В начало', controller: 'start'
  %h1 Генератор бализажей: редактирование шаблона

%section
  = form_for @item, url: {action: :generate}, :html => {:id => 'form'} do |f|
    = f.hidden_field :image, value: @data_from_page[:image]
    %h2 Данные:
    %label Наименование товара
    = f.text_field :name, value: @data_from_page[:name]
    %label Артикул
    = f.text_field :articulus, value: @data_from_page[:articulus]
    %label Цена в рублях
    = f.text_field :price, value: @data_from_page[:price]
    %ln

    %avantages#avants
      %h2 Характеристики:
      -@avantages_from_page.each do |avantage|
        %figure

          %aside
            %label Иконка
            #dropdown{class: 'wrapper-dropdown'}
              %span
                = image_tag(avantage[:icon])
              %ul{class: 'dropdown'}
                %li
                  %a
                    = image_tag(avantage[:icon])
                -@icons.each do |icon|
                  %li
                    %a
                      %img{src: icon[:url]}

          %figcaption
            %a{:onclick => 'this.parentNode.parentNode.remove()', :class => 'button-delete'} [x] Удалить
            %input{:name => 'item[avantages][][icon]', :type => 'hidden', :value => avantage[:icon]}
            %label Заголовок
            %input{:name => 'item[avantages][][title]', :type => 'text', :value => avantage[:title], :class => 'title'}
            %label Описание
            %input{:name => 'item[avantages][][description]', :type => 'text', :value => avantage[:description], :class => 'description'}

    %a{:onclick => 'avant_add()', :class => 'button blue_button'} Добавить характеристику
    %ln
    = f.submit "Сформировать шаблон", :class => 'button blue_button'